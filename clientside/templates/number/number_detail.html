{% extends "base.html" %}

{% block content %}

<title>{% block title %}Number Detail{% endblock %}</title>
<div class="container my-4">

    <!-- Header -->
    <h2 class="mb-4 fw-bold"><i class="bi bi-phone"></i> Number Details</h2>

    <!-- Number Details Card -->
    <div class="p-4 border rounded shadow-sm mb-4 bg-white">
        <p><strong>Number:</strong> <span class="fs-4 fw-bold text-primary">{{ number.number }}</span></p>
        <p><strong>Operator:</strong> {{ number.operator.name }}</p>
        <p><strong>SIM Status:</strong> {{ number.sim_status }}</p>
        <p><strong>Collection Day:</strong> {{ number.collection_day }}</p>
        <p><strong>Client: <a href="{% url 'client-detail' number.client_id %}">{{ number.client.name }}</a> </strong> </p>
    </div>

    <!-- Action Buttons -->
    <div class="d-flex gap-2 mb-4">
        <a href="{% url 'add-invoice' number.id %}" class="btn btn-outline-primary px-3">
            <i class="bi bi-receipt"></i> Add Invoice
        </a>

        <a href="{% url 'add-payment' number.id %}" class="btn btn-success px-3">
            <i class="bi bi-wallet2"></i> Add Payment
        </a>
    </div>

    <!-- Balance Display -->
    <div class="p-3 mb-4 bg-light border rounded">
        <h4 class="fw-bold m-0">
            Current Balance to Pay:
            <span class="text-danger">â‚± {{ current_balance }}</span>
        </h4>
    </div>

    <!-- Transaction History -->
    <div class="mb-4">
        <h3 class="mb-3"><i class="bi bi-clock-history"></i> Transaction History</h3>

        <div id="history-table"
             hx-get="{% url 'hx-history-table' number.id %}"
             hx-trigger="load">
        </div>
    </div>

    <!-- Edit / Back Buttons -->
    <div class="d-flex gap-2">
        <a href="{% url 'edit-number' number.id %}" class="btn btn-primary">
            <i class="bi bi-pencil"></i> Edit Number
        </a>

        <a href="javascript:history.back()" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Back
        </a>
    </div>

</div>


{% endblock %}
